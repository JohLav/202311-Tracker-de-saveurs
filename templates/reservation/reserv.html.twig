{# templates/reservation/reserv.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Nouvelle réservation{% endblock %}

{% block body %}

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

    <div class="image-container">
        <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="{{ asset('https://cdn.pixabay.com/photo/2017/01/26/02/06/platter-2009590_1280.jpg') }}"
                         class="d-block w-100 img-fluid" alt="Image du restaurant" style="max-height: 550px;">
                </div>
                <div class="carousel-item">
                    <img src='https://cdn.pixabay.com/photo/2017/08/02/21/09/interior-2573445_1280.jpg'
                         class="d-block w-100 img-fluid" alt="Image du restaurant" style="max-height: 550px;">
                </div>
                <div class="carousel-item">
                    <img src='https://cdn.pixabay.com/photo/2016/04/25/06/39/food-1351287_960_720.jpg'
                         class="d-block w-100 img-fluid" alt="Image du restaurant" style="max-height: 550px;">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <div class="row m-5">
        <div class="col-md-6">

            <div class="card mb-5" style="width: 30rem;">
                <div class="card-body">
                    <h5 class="card-title">{{ restaurant.name }}</h5>
                    <p class="card-text"></p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Catégorie : {{ restaurant.category.name }}</li>
                    <li class="list-group-item">Capacité : {{ restaurant.capacity }}</li>
                    <li class="list-group-item">Téléphone : {{ restaurant.phone }}</li>
                    <li class="list-group-item">Adresse : {{ restaurant.address }}</li>
                    <li class="list-group-item">Ville : {{ restaurant.city.name }}</li>
                </ul>
            </div>

            <div class="card mb-5" style="width: 30rem;">
                <div class="card-body" data-bs-toggle="collapse" href="#menus" role="button" aria-expanded="false"
                     aria-controls="collapseExample">
                    <h5 class="card-title">Les menus</h5>
                    <p class="card-text"></p>
                </div>
                <ul class="list-group list-group-flush collapse" id="menus">

                    <li class="list-group-item">
                        <ul>
                            {% if restaurant.menus|length > 0 %}
                                {% for menu in restaurant.menus %}
                                    <div class="m-2">
                                        <li class="fw-bold">{{ menu.name }} - {{ menu.reduction }} €</li>
                                        <span style="font-style: italic">{{ menu.description }}</span>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="m-2">
                                    <li>Aucun menus</li>
                                </div>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="card mb-5" style="width: 30rem;">
                <div class="card-body" data-bs-toggle="collapse" href="#items" role="button" aria-expanded="false"
                     aria-controls="collapseExample">
                    <h5 class="card-title">A la carte</h5>
                    <p class="card-text"></p>
                </div>
                <ul class="list-group list-group-flush collapse" id="items">
                    <li class="list-group-item">
                        <ul>
                            {% if restaurant.menus|length > 0 %}
                                {% for item in restaurant.items|filter(item => item.visible == true) %}
                                    <div class="m-2">
                                        <li class="fw-bold">{{ item.name }} - {{ item.price }} €</li>
                                        <span style="font-style: italic">{{ item.description }}</span>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="m-2">
                                    <li>Aucun article a la carte</li>
                                </div>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
            </div>

        </div>

        <div class="col-md-6">
            <h1>Nouvelle réservation</h1>
            {% for message in app.flashes('success') %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}

            {{ form_start(form, {'attr': {'class': 'my-form-class'}}) }}
            {{ form_widget(form) }}
            <div class="card">
                <div class="card-body border p-0">
                    <p>
                        <a class="btn btn-primary p-2 w-100 h-100 d-flex align-items-center justify-content-between"
                           data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true"
                           aria-controls="collapseExample">
                            <span class="fw-bold">Carte de crédit</span>
                            <span class="">
                                    <span class="fab fa-cc-amex"></span>
                                    <span class="fab fa-cc-mastercard"></span>
                                    <span class="fab fa-cc-discover"></span>
                                </span>
                        </a>
                    </p>
                    <div class="collapse show p-3 pt-0" id="collapseExample">
                        <div class="row">
                            <div class="col-lg-5 mb-lg-0 mb-3">
                                <p class="h4 mb-0"></p>
                                <p class="mb-0"><span class="fw-bold">Payer la caution</span><span class="c-green">
                                            </span>
                                </p>
                                <p class="mb-0">
                                    <span class="fw-bold">Prix:</span>
                                    <span class="c-green">20 €</span>
                                </p>
                                <p class="mb-0"></p>
                            </div>
                            <div class="col-lg-7">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form__div">
                                            <label for="" class="form__label">Numéro de carte</label>
                                            <input type="text" class="form-control" placeholder=" ">
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="form__div">
                                            <label for="" class="form__label">mois/année</label>
                                            <input type="text" class="form-control" placeholder=" ">
                                        </div>
                                    </div>

                                    <div class="col-6">
                                        <div class="form__div">
                                            <label for="" class="form__label">cvv code</label>
                                            <input type="password" class="form-control" placeholder=" ">
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form__div">
                                            <label for="" class="form__label">Nom</label>
                                            <input type="text" class="form-control" placeholder=" ">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 mt-3">
                <button type="submit" class="btn btn-primary w-100">Réserver</button>
            </div>

            {{ form_end(form) }}

        </div>
    </div>

{% endblock %}
